<div class="space-y-6 p-4 md:p-6">
  <!-- Header Section -->
  <div class="flex flex-col md:flex-row md:items-center justify-between gap-4">
    <div>
      <h1 class="text-2xl md:text-3xl font-bold text-gray-900 flex items-center">
        <span class="mr-3 text-3xl">Analytics & Reports</span>
      </h1>
      <p class="text-gray-600 mt-1">Business insights and performance metrics</p>
    </div>
    
    <!-- Export Buttons -->
    <div class="flex flex-wrap gap-3">
      <button (click)="exportToCSV()"
              class="px-4 py-2.5 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 
                     transition duration-200 flex items-center shadow-sm">
        <div class="bg-green-200 p-2 rounded-lg mr-2">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="#628141" class="size-4">
            <path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3" />
          </svg>
        </div>
        <span class="font-medium">Export CSV</span>
      </button>
      <button (click)="exportToPDF()"
              class="px-4 py-2.5 bg-gray-900 text-white rounded-lg hover:bg-gray-800 
                     transition duration-200 flex items-center shadow-sm">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="size-5">
          <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 7.5V6.108c0-1.135.845-2.098 1.976-2.192.373-.03.748-.057 1.123-.08M15.75 18H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08M15.75 18.75v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5A3.375 3.375 0 0 0 6.375 7.5H5.25m11.9-3.664A2.251 2.251 0 0 0 15 2.25h-1.5a2.251 2.251 0 0 0-2.15 1.586m5.8 0c.065.21.1.433.1.664v.75h-6V4.5c0-.231.035-.454.1-.664M6.75 7.5H4.875c-.621 0-1.125.504-1.125 1.125v12c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V16.5a9 9 0 0 0-9-9Z" />
        </svg>
        <span class="ml-2 font-medium">Export PDF</span>
      </button>
    </div>
  </div>

  <!-- Filter Section -->
  <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-4 md:p-6">
    <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
      <!-- Date Range -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Date Range</label>
        <select [(ngModel)]="selectedDateRange" 
                [ngModelOptions]="{standalone: true}"
                class="w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 
                       focus:ring-blue-500 focus:border-blue-500">
          <option *ngFor="let range of dateRanges" [value]="range.value">
            {{range.label}}
          </option>
        </select>
      </div>
      
      <!-- Trip Type -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Trip Type</label>
        <select class="w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 
                      focus:ring-blue-500 focus:border-blue-500">
          <option value="all">All Types</option>
          <option value="vip">VIP</option>
          <option value="semi">Semi-Private</option>
          <option value="public">Public</option>
        </select>
      </div>
      
      <!-- Destination -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Destination</label>
        <select class="w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 
                      focus:ring-blue-500 focus:border-blue-500">
          <option value="all">All Destinations</option>
          <option *ngFor="let dest of popularDestinations" [value]="dest.name">
            {{dest.name}}
          </option>
        </select>
      </div>
      
      <!-- Action Buttons -->
      <div class="flex items-end gap-2">
        <button (click)="applyFilters()"
                class="flex-1 px-4 py-[11px] bg-blue-600 text-white rounded-lg hover:bg-blue-700 
                       transition duration-200 font-medium">
          Apply Filters
        </button>
        <button (click)="resetFilters()"
                class="px-4 py-2.5 border border-gray-300 rounded-lg hover:bg-gray-50 
                       transition duration-200">
          Reset
        </button>
      </div>
    </div>
    
    <!-- Custom Date Range (conditional) -->
    <div *ngIf="showCustomDate" class="mt-4 grid grid-cols-1 md:grid-cols-2 gap-4 pt-4 border-t">
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Start Date</label>
        <input type="date" 
               class="w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 
                      focus:ring-blue-500 focus:border-blue-500">
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">End Date</label>
        <input type="date" 
               class="w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 
                      focus:ring-blue-500 focus:border-blue-500">
      </div>
    </div>
  </div>

  <!-- Navigation Tabs -->
  <div class="border-b border-gray-200">
    <nav class="flex space-x-8 overflow-x-auto">
      <button (click)="switchTab('overview')"
              [class]="activeTab === 'overview' 
                ? 'border-blue-500 text-blue-600' 
                : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'"
              class="whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm transition">
              Overview
      </button>
      <button (click)="switchTab('revenue')"
              [class]="activeTab === 'revenue' 
                ? 'border-blue-500 text-blue-600' 
                : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'"
              class="whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm transition">
              Revenue Analytics
      </button>
      <button (click)="switchTab('destinations')"
              [class]="activeTab === 'destinations' 
                ? 'border-blue-500 text-blue-600' 
                : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'"
              class="whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm transition">
              Popular Destinations
      </button>
      <button (click)="switchTab('guides')"
              [class]="activeTab === 'guides' 
                ? 'border-blue-500 text-blue-600' 
                : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'"
              class="whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm transition">
              Guide Performance
      </button>
      <button (click)="switchTab('cancellations')"
              [class]="activeTab === 'cancellations' 
                ? 'border-blue-500 text-blue-600' 
                : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'"
              class="whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm transition">
              Cancellation Analysis
      </button>
    </nav>
  </div>

  <!-- Overview Tab -->
  <div *ngIf="activeTab === 'overview'" class="space-y-6 animate-fadeIn">
    <!-- Key Metrics -->
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
      <!-- Total Revenue -->
      <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
        <div class="flex items-center justify-between mb-4">
          <div class="p-3 bg-blue-100 rounded-lg">
            <span class="flex justify-center items-center font-semibold space-x-2 text-lg text-blue-600">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
              </svg>
              <p>Money</p>
            </span>
          </div>
          <span class="text-sm font-medium text-green-600 bg-green-50 px-2 py-1 rounded">+8%</span>
        </div>
        <p class="text-gray-500 text-sm font-medium mb-1">Total Revenue</p>
        <h3 class="text-2xl font-bold text-gray-900">${{getTotalRevenue().toLocaleString()}}</h3>
        <p class="text-gray-400 text-xs mt-2">Last 30 days</p>
      </div>
      
      <!-- Total Bookings -->
      <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
        <div class="flex items-center justify-between mb-4">
          <div class="p-3 bg-green-100 rounded-lg">
            <span class="flex justify-center items-center font-semibold space-x-2 text-lg text-green-600">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
                <path stroke-linecap="round" stroke-linejoin="round" d="M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25ZM6.75 12h.008v.008H6.75V12Zm0 3h.008v.008H6.75V15Zm0 3h.008v.008H6.75V18Z" />
              </svg>
              <p>Note</p>
            </span>
          </div>
          <span class="text-sm font-medium text-green-600 bg-green-50 px-2 py-1 rounded">+8%</span>
        </div>
        <p class="text-gray-500 text-sm font-medium mb-1">Total Bookings</p>
        <h3 class="text-2xl font-bold text-gray-900">{{getTotalBookings()}}</h3>
        <p class="text-gray-400 text-xs mt-2">Last 30 days</p>
      </div>
      
      <!-- Avg Guide Rating -->
      <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
        <div class="flex items-center justify-between mb-4">
          <div class="p-3 bg-yellow-100 rounded-lg">
            <span class="flex justify-center items-center font-semibold space-x-2 text-lg text-yellow-600">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
                <path stroke-linecap="round" stroke-linejoin="round" d="M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z" />
              </svg>
              <p>Rate</p>
            </span>
          </div>
          <span class="text-sm font-medium text-green-600 bg-green-50 px-2 py-1 rounded">+0.2</span>
        </div>
        <p class="text-gray-500 text-sm font-medium mb-1">Avg. Guide Rating</p>
        <h3 class="text-2xl font-bold text-gray-900">{{getAverageGuideRating().toFixed(1)}}/5</h3>
        <p class="text-gray-400 text-xs mt-2">Based on {{guidePerformance.length}} guides</p>
      </div>
      
      <!-- Cancellation Rate -->
      <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
        <div class="flex items-center justify-between mb-4">
          <div class="p-3 bg-red-100 rounded-lg">
            <span class="flex justify-center items-center font-semibold space-x-2 text-lg text-red-600">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
                <path stroke-linecap="round" stroke-linejoin="round" d="m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
              </svg>
              <p>Cencel</p>
            </span>
          </div>
          <span class="text-sm font-medium text-green-600 bg-green-50 px-2 py-1 rounded">-1.2%</span>
        </div>
        <p class="text-gray-500 text-sm font-medium mb-1">Cancellation Rate</p>
        <h3 class="text-2xl font-bold text-gray-900">{{getCancellationRate().toFixed(1)}}%</h3>
        <p class="text-gray-400 text-xs mt-2">{{getTotalCancellations()}} total cancellations</p>
      </div>
    </div>

    <!-- Revenue by Type & Top Destinations -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
      <!-- Revenue by Type -->
      <div class="bg-white rounded-xl shadow-sm border border-gray-200">
        <div class="p-6 border-b border-gray-200">
          <h3 class="text-lg font-semibold text-gray-900">Revenue by Trip Type</h3>
          <p class="text-gray-500 text-sm mt-1">Distribution of revenue across trip categories</p>
        </div>
        <div class="p-6">
          <div class="space-y-5">
            <div *ngFor="let item of revenueByType" class="space-y-2">
              <div class="flex justify-between items-center">
                <div class="flex items-center">
                  <div class="w-3 h-3 rounded-full mr-3" [ngClass]="item.color"></div>
                  <span class="font-medium text-gray-700">{{item.type}}</span>
                </div>
                <span class="font-bold text-gray-900">${{item.revenue.toLocaleString()}}</span>
              </div>
              <div class="flex items-center justify-between text-sm">
                <span class="text-gray-500">{{item.bookings}} bookings ‚Ä¢ Avg: ${{item.avgPrice}}</span>
                <span class="font-medium">{{((item.revenue / getTotalRevenue()) * 100).toFixed(1)}}%</span>
              </div>
              <div class="h-2 bg-gray-100 rounded-full overflow-hidden">
                <div class="h-full rounded-full transition-all duration-500" 
                     [ngClass]="item.color"
                     [style.width.%]="getRevenuePercentage(item.type)"></div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Top Destinations -->
      <div class="bg-white rounded-xl shadow-sm border border-gray-200">
        <div class="p-6 border-b border-gray-200">
          <h3 class="text-lg font-semibold text-gray-900">Top 3 Destinations</h3>
          <p class="text-gray-500 text-sm mt-1">Most popular destinations by bookings</p>
        </div>
        <div class="p-6">
          <div class="space-y-5">
            <div *ngFor="let dest of getTopDestinations(); let i = index" 
                 class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
              <div class="flex items-center">
                <div class="w-10 h-10 rounded-lg bg-blue-100 flex items-center justify-center mr-4">
                  <span class="text-lg">üèÜ</span>
                </div>
                <div>
                  <p class="font-medium text-gray-900">{{dest.name}}</p>
                  <p class="text-sm text-gray-500">{{dest.bookings}} bookings</p>
                </div>
              </div>
              <div class="text-right">
                <p class="font-bold text-gray-900">${{dest.revenue.toLocaleString()}}</p>
                <p [ngClass]="getGrowthColor(dest.growth)" class="text-sm font-medium">
                  {{dest.growth >= 0 ? '+' : ''}}{{dest.growth}}%
                </p>
              </div>
            </div>
          </div>
          
          <!-- View All Link -->
          <div class="mt-6 pt-6 border-t border-gray-200">
            <button (click)="switchTab('destinations')"
                    class="w-full py-3 text-center text-blue-600 hover:text-blue-700 
                           font-medium rounded-lg hover:bg-blue-50 transition">
              View All Destinations ‚Üí
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Monthly Trend -->
    <div class="bg-white rounded-xl shadow-sm border border-gray-200">
      <div class="p-6 border-b border-gray-200">
        <h3 class="text-lg font-semibold text-gray-900">Monthly Revenue Trend</h3>
        <p class="text-gray-500 text-sm mt-1">Revenue and bookings over the last 12 months</p>
      </div>
      <div class="p-6">
        <!-- Simplified chart using Tailwind CSS -->
        <div class="h-64 flex items-end space-x-2">
          <div *ngFor="let month of monthlyData; let i = index" 
               class="flex-1 flex flex-col items-center">
            <div class="relative w-full flex justify-center">
              <!-- Revenue bar -->
              <div class="w-3/4 bg-blue-500 rounded-t-lg" 
                   [style.height.px]="(month.revenue / 105000) * 150"></div>
              <!-- Bookings bar -->
              <div class="w-3/4 bg-green-500 rounded-t-lg absolute bottom-0" 
                   [style.height.px]="(month.bookings / 136) * 150"></div>
            </div>
            <span class="text-xs text-gray-500 mt-2">{{month.month}}</span>
            <span class="text-xs font-medium text-gray-700 mt-1">
              ${{(month.revenue / 1000).toFixed(0)}}k
            </span>
          </div>
        </div>
        
        <div class="flex items-center justify-center space-x-6 mt-6">
          <div class="flex items-center">
            <div class="w-3 h-3 bg-blue-500 rounded mr-2"></div>
            <span class="text-sm text-gray-600">Revenue</span>
          </div>
          <div class="flex items-center">
            <div class="w-3 h-3 bg-green-500 rounded mr-2"></div>
            <span class="text-sm text-gray-600">Bookings</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Revenue Analytics Tab -->
  <div *ngIf="activeTab === 'revenue'" class="space-y-6 animate-fadeIn">
    <!-- Revenue Summary -->
    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
      <h3 class="text-lg font-semibold text-gray-900 mb-4">Revenue Breakdown</h3>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        <div *ngFor="let item of revenueByType" 
             class="border border-gray-200 rounded-xl p-5">
          <div class="flex items-center justify-between mb-3">
            <div class="flex items-center">
              <div class="w-3 h-3 rounded-full mr-2" [ngClass]="item.color"></div>
              <h4 class="font-semibold text-gray-900">{{item.type}}</h4>
            </div>
            <span [ngClass]="item.textColor" class="text-sm font-bold">
              {{((item.revenue / getTotalRevenue()) * 100).toFixed(1)}}%
            </span>
          </div>
          <div class="space-y-3">
            <div>
              <p class="text-2xl font-bold text-gray-900">${{item.revenue.toLocaleString()}}</p>
              <p class="text-gray-500 text-sm">Total Revenue</p>
            </div>
            <div class="grid grid-cols-2 gap-4 text-sm">
              <div>
                <p class="font-medium text-gray-900">{{item.bookings}}</p>
                <p class="text-gray-500">Bookings</p>
              </div>
              <div>
                <p class="font-medium text-gray-900">${{item.avgPrice}}</p>
                <p class="text-gray-500">Avg. Price</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Monthly Revenue Table -->
    <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden">
      <div class="p-6 border-b border-gray-200">
        <h3 class="text-lg font-semibold text-gray-900">Monthly Revenue Details</h3>
      </div>
      <div class="overflow-x-auto">
        <table class="w-full">
          <thead class="bg-gray-50">
            <tr>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                Month
              </th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                Revenue
              </th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                Bookings
              </th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                Avg. Value
              </th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                Cancellations
              </th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                Cancellation Rate
              </th>
            </tr>
          </thead>
          <tbody class="divide-y divide-gray-200">
            <tr *ngFor="let data of monthlyData" class="hover:bg-gray-50">
              <td class="px-6 py-4 whitespace-nowrap font-medium text-gray-900">
                {{data.month}}
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="flex items-center">
                  <div class="w-24 h-2 bg-gray-200 rounded-full mr-3">
                    <div class="h-full bg-blue-500 rounded-full" 
                         [style.width.%]="(data.revenue / 105000) * 100"></div>
                  </div>
                  <span class="font-medium">${{data.revenue.toLocaleString()}}</span>
                </div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                {{data.bookings}}
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                ${{(data.revenue / data.bookings).toFixed(0)}}
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <span [class]="data.cancellations > 8 ? 'text-red-600 font-medium' : 'text-gray-600'">
                  {{data.cancellations}}
                </span>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <span [class]="(data.cancellations / data.bookings) > 0.1 ? 'text-red-600' : 'text-green-600'">
                  {{(data.cancellations / data.bookings * 100).toFixed(1)}}%
                </span>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- Popular Destinations Tab -->
  <div *ngIf="activeTab === 'destinations'" class="space-y-6 animate-fadeIn">
    <!-- Destinations Grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      <div *ngFor="let dest of popularDestinations" 
           class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden">
        <div class="p-5">
          <div class="flex justify-between items-start mb-4">
            <div>
              <h4 class="font-semibold text-gray-900 text-lg mb-1">{{dest.name}}</h4>
              <div class="flex items-center">
                <span class="text-yellow-500">‚≠ê</span>
                <span class="ml-1 text-sm text-gray-600">{{dest.rating}}/5</span>
              </div>
            </div>
            <span [ngClass]="getGrowthColor(dest.growth)" 
                  class="text-sm font-bold">
              {{dest.growth >= 0 ? '+' : ''}}{{dest.growth}}%
            </span>
          </div>
          
          <div class="space-y-3">
            <div class="flex justify-between text-sm">
              <span class="text-gray-500">Bookings</span>
              <span class="font-medium text-gray-900">{{dest.bookings}}</span>
            </div>
            <div class="flex justify-between text-sm">
              <span class="text-gray-500">Revenue</span>
              <span class="font-medium text-gray-900">${{dest.revenue.toLocaleString()}}</span>
            </div>
            <div class="flex justify-between text-sm">
              <span class="text-gray-500">Avg. per booking</span>
              <span class="font-medium text-gray-900">${{(dest.revenue / dest.bookings).toFixed(0)}}</span>
            </div>
          </div>
          
          <!-- Progress bar -->
          <div class="mt-4">
            <div class="flex justify-between text-xs text-gray-500 mb-1">
              <span>Popularity</span>
              <span>{{(dest.bookings / 156 * 100).toFixed(0)}}%</span>
            </div>
            <div class="h-2 bg-gray-100 rounded-full overflow-hidden">
              <div class="h-full bg-blue-500 rounded-full" 
                   [style.width.%]="dest.bookings / 156 * 100"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Guide Performance Tab -->
  <div *ngIf="activeTab === 'guides'" class="space-y-6 animate-fadeIn">
    <!-- Guide Performance Grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      <div *ngFor="let guide of guidePerformance" 
           class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden">
        <div class="p-5">
          <!-- Guide Header -->
          <div class="flex items-start justify-between mb-4">
            <div class="flex items-center">
              <div class="w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center mr-3">
                <span class="text-xl">üë§</span>
              </div>
              <div>
                <h4 class="font-semibold text-gray-900">{{guide.name}}</h4>
                <p class="text-sm text-gray-500">{{guide.languages.join(', ')}}</p>
              </div>
            </div>
            <div class="text-center">
              <div class="text-2xl font-bold text-gray-900">{{guide.rating}}</div>
              <div class="text-xs text-gray-500">Rating</div>
            </div>
          </div>
          
          <!-- Performance Stats -->
          <div class="space-y-3 mb-4">
            <div class="flex justify-between text-sm">
              <span class="text-gray-500">Total Trips</span>
              <span class="font-medium text-gray-900">{{guide.totalTrips}}</span>
            </div>
            <div class="flex justify-between text-sm">
              <span class="text-gray-500">Revenue Generated</span>
              <span class="font-medium text-gray-900">${{guide.totalRevenue.toLocaleString()}}</span>
            </div>
            <div class="flex justify-between text-sm">
              <span class="text-gray-500">Completion Rate</span>
              <span [class]="guide.completionRate >= 95 ? 'text-green-600 font-medium' : 'text-yellow-600 font-medium'">
                {{guide.completionRate}}%
              </span>
            </div>
            <div class="flex justify-between text-sm">
              <span class="text-gray-500">Reviews</span>
              <span class="font-medium text-gray-900">{{guide.reviews}}</span>
            </div>
          </div>
          
          <!-- Rating Stars -->
          <div class="flex items-center justify-center mb-3">
            <div *ngFor="let star of [1,2,3,4,5]" 
                  class="text-xl" 
                  [class.text-yellow-400]="star <= floor(guide.rating)"
                  [class.text-gray-300]="star > floor(guide.rating)">
              {{star <= guide.rating ? '‚òÖ' : '‚òÜ'}}
            </div>
            <span class="ml-2 text-sm text-gray-600">{{guide.rating}}/5</span>
          </div>
          
          <!-- Performance Indicator -->
          <div class="mt-4">
            <div class="flex justify-between text-xs text-gray-500 mb-1">
              <span>Performance</span>
              <span>{{guide.completionRate}}%</span>
            </div>
            <div class="h-2 bg-gray-100 rounded-full overflow-hidden">
              <div class="h-full rounded-full" 
                   [ngClass]="guide.completionRate >= 95 ? 'bg-green-500' : 'bg-yellow-500'"
                   [style.width.%]="guide.completionRate"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Cancellation Analysis Tab -->
  <div *ngIf="activeTab === 'cancellations'" class="space-y-6 animate-fadeIn">
    <!-- Cancellation Stats -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
      <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
        <div class="text-center">
          <div class="text-3xl font-bold text-red-600 mb-2">{{getCancellationRate().toFixed(1)}}%</div>
          <p class="text-gray-600 font-medium">Overall Cancellation Rate</p>
          <p class="text-green-600 text-sm mt-1">‚Üì 1.2% from last month</p>
        </div>
      </div>
      
      <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
        <div class="text-center">
          <div class="text-3xl font-bold text-gray-900 mb-2">{{getTotalCancellations()}}</div>
          <p class="text-gray-600 font-medium">Total Cancellations</p>
          <p class="text-gray-500 text-sm mt-1">Out of {{getTotalBookings()}} total bookings</p>
        </div>
      </div>
      
      <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
        <div class="text-center">
          <div class="text-3xl font-bold text-yellow-600 mb-2">48h</div>
          <p class="text-gray-600 font-medium">Average Notice</p>
          <p class="text-gray-500 text-sm mt-1">Before trip departure</p>
        </div>
      </div>
    </div>

    <!-- Cancellation Reasons -->
    <div class="bg-white rounded-xl shadow-sm border border-gray-200">
      <div class="p-6 border-b border-gray-200">
        <h3 class="text-lg font-semibold text-gray-900">Cancellation Reasons</h3>
        <p class="text-gray-500 text-sm mt-1">Breakdown of why trips are cancelled</p>
      </div>
      <div class="p-6">
        <div class="space-y-4">
          <div *ngFor="let reason of cancellationReasons" 
               class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
            <div class="flex items-center">
              <div class="w-3 h-3 rounded-full mr-3"
                   [ngClass]="{
                     'bg-blue-500': reason.trend === 'up',
                     'bg-red-500': reason.trend === 'down',
                     'bg-gray-500': reason.trend === 'stable'
                   }"></div>
              <div>
                <p class="font-medium text-gray-900">{{reason.reason}}</p>
                <p class="text-sm text-gray-500">{{reason.count}} cases</p>
              </div>
            </div>
            <div class="text-right">
              <p class="font-bold text-gray-900">{{reason.percentage}}%</p>
              <p class="text-sm text-gray-500 flex items-center justify-end">
                <span class="mr-1">{{getTrendIcon(reason.trend)}}</span>
                {{reason.trend}}
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Recommendations -->
    <div class="bg-blue-50 border border-blue-200 rounded-xl p-6">
      <h3 class="text-lg font-semibold text-blue-900 mb-4">üìã Recommendations to Reduce Cancellations</h3>
      <ul class="space-y-3">
        <li class="flex items-start">
          <span class="text-blue-500 mr-2">‚úì</span>
          <span class="text-blue-800">Implement flexible rescheduling policy (reduces "Change of plans" by 40%)</span>
        </li>
        <li class="flex items-start">
          <span class="text-blue-500 mr-2">‚úì</span>
          <span class="text-blue-800">Add price match guarantee to address "Found better price"</span>
        </li>
        <li class="flex items-start">
          <span class="text-blue-500 mr-2">‚úì</span>
          <span class="text-blue-800">Send weather updates 7 days before trip for "Weather concerns"</span>
        </li>
        <li class="flex items-start">
          <span class="text-blue-500 mr-2">‚úì</span>
          <span class="text-blue-800">Offer trip insurance at booking stage for "Health issues"</span>
        </li>
      </ul>
    </div>
  </div>

  <!-- Footer Note -->
  <div class="text-center text-gray-500 text-sm py-4">
    <p>üìä Reports generated on ‚Ä¢ Data updates daily</p>
  </div>
</div>